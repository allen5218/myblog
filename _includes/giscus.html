<div id="giscus_thread" class="giscus-thread">
  {% if site.giscus.repo %}
    <!-- Pass giscus config from _config.yml to JavaScript -->
    <script>
      window.giscusConfig = {
        repo: "{{ site.giscus.repo }}",
        repoId: "{{ site.giscus.repo_id }}",
        category: "{{ site.giscus.category }}",
        categoryId: "{{ site.giscus.category_id }}",
        mapping: "{{ site.giscus.mapping | default: 'pathname' }}",
        strict: "{{ site.giscus.strict | default: '0' }}",
        reactionsEnabled: "{{ site.giscus.reactions_enabled | default: '0' }}",
        emitMetadata: "{{ site.giscus.emit_metadata | default: '0' }}",
        inputPosition: "{{ site.giscus.input_position | default: 'top' }}",
        darkTheme: "{{ site.giscus.dark_theme | default: 'dark_dimmed' }}",
        lightTheme: "{{ site.giscus.light_theme | default: 'light' }}",
        lang: "{{ site.giscus.lang | default: 'zh-TW' }}"
      };
    </script>
    <script defer src="{{ '/js/giscus-setup.js' | relative_url }}"></script>
    <noscript>
      Please enable JavaScript to view the
      <a href="http://giscus.app/?ref_noscript">comments powered by giscus.</a>
    </noscript>
  {% else %}
    <div class="alert alert-warning" role="alert">
      <h5>Giscus comments misconfigured</h5>
      <p>Please follow instructions at <a href="http://giscus.app">giscus.app</a> and update your giscus configuration in <code>_config.yml</code>.</p>
    </div>
  {% endif %}
</div>